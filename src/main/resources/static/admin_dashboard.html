<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard - SMS</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
<div class="dashboard-container">
    <aside class="sidebar">
        <div class="sidebar-header">
            <i class="fas fa-university"></i>
            <h2>SMS Portal</h2>
        </div>
        <nav class="sidebar-nav">
            <a href="#" class="active"><i class="fas fa-tachometer-alt"></i> Dashboard</a>
        </nav>
        <div class="sidebar-footer">
            <button class="logout-btn" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</button>
        </div>
    </aside>

    <main class="main-content">
        <header class="main-header">
            <h1>Welcome, Admin!</h1>
            <p>Manage all students and teachers from this central hub.</p>
        </header>

        <section class="content-card">
            <div class="list-header">
                <h2><i class="fas fa-chalkboard-teacher"></i> Teachers</h2>
                <button class="action-btn create-btn" onclick="openCreateTeacherModal()"><i class="fas fa-plus"></i> Create Teacher</button>
            </div>
            <div class="table-responsive">
                <table>
                    <thead>
                    <tr>
                        <th>Username</th>
                        <th>Subject</th>
                        <th>Position</th>
                        <th>Actions</th>
                    </tr>
                    </thead>
                    <tbody id="teachers-table-body"></tbody>
                </table>
            </div>
        </section>

        <section class="content-card">
            <div class="list-header">
                <h2><i class="fas fa-user-graduate"></i> Students</h2>
                <button class="action-btn create-btn" onclick="openCreateStudentModal()"><i class="fas fa-plus"></i> Create Student</button>
            </div>
            <div class="table-responsive">
                <table>
                    <thead>
                    <tr>
                        <th>Roll Number</th>
                        <th>Username</th>
                        <th>Course</th>
                        <th>Batch</th>
                        <th>Actions</th>
                    </tr>
                    </thead>
                    <tbody id="students-table-body"></tbody>
                </table>
            </div>
        </section>
    </main>
</div>

<!-- MODALS -->
<div id="teacherModal" class="modal">
    <div class="modal-content">
        <span class="close-btn" onclick="closeModal('teacherModal')">&times;</span>
        <h3 class="modal-title" data-default-title="Create New Teacher">Create New Teacher</h3>
        <form id="teacherForm" onsubmit="handleTeacherSubmit(event)">
            <input type="hidden" id="teacherId">
            <div class="form-group"><label for="teacherUsername">Username</label><input type="text" id="teacherUsername" required></div>
            <div class="form-group"><label for="teacherPassword">Password</label><input type="password" id="teacherPassword" placeholder="Leave blank to keep current"></div>
            <div class="form-group"><label for="teacherSubject">Subject</label><input type="text" id="teacherSubject" required></div>
            <div class="form-group"><label for="teacherPosition">Position</label><input type="text" id="teacherPosition" required></div>
            <div class="form-group"><label for="teacherOffice">Office</label><input type="text" id="teacherOffice"></div>
            <button type="submit" class="modal-btn">Save Teacher</button>
        </form>
    </div>
</div>

<div id="studentModal" class="modal">
    <div class="modal-content">
        <span class="close-btn" onclick="closeModal('studentModal')">&times;</span>
        <h3 class="modal-title" data-default-title="Create New Student">Create New Student</h3>
        <form id="studentForm" onsubmit="handleStudentSubmit(event)">
            <input type="hidden" id="studentId">
            <div class="form-group"><label for="studentRollNumber">Roll Number</label><input type="text" id="studentRollNumber" required></div>
            <div class="form-group"><label for="studentUsername">Username</label><input type="text" id="studentUsername" required></div>
            <div class="form-group"><label for="studentPassword">Password</label><input type="password" id="studentPassword" placeholder="Leave blank to keep current"></div>
            <div class="form-group"><label for="studentCourse">Course</label><input type="text" id="studentCourse" required></div>
            <div class="form-group"><label for="studentBatch">Batch</label><input type="number" id="studentBatch" required></div>
            <div class="form-group"><label for="studentCgpa">CGPA</label><input type="number" step="0.01" id="studentCgpa" required></div>
            <button type="submit" class="modal-btn">Save Student</button>
        </form>
    </div>
</div>

<div id="assignStudentModal" class="modal">
    <div class="modal-content">
        <span class="close-btn" onclick="closeModal('assignStudentModal')">&times;</span>
        <h3>Assign Student to <span id="assign-teacher-name"></span></h3>
        <form id="assignForm" onsubmit="assignStudent(event)">
            <input type="hidden" id="assignTeacherUsername">
            <div class="form-group">
                <label for="student-select-list">Select Student</label>
                <select id="student-select-list" required><option value="">-- Loading... --</option></select>
            </div>
            <button type="submit" class="modal-btn">Assign</button>
        </form>
    </div>
</div>

<div id="viewDetailsModal" class="modal">
    <div class="modal-content">
        <span class="close-btn" onclick="closeModal('viewDetailsModal')">&times;</span>
        <h3 class="modal-title">User Details</h3>
        <div id="details-content"></div>
    </div>
</div>

<script src="script.js"></script>
<script>
    window.onload = fetchAdminDashboard;
</script>
</body>
</html>

